# 去中心化金融 (DeFi)

## 1. 什么是 DeFi？
DeFi (Decentralized Finance) 是构建在区块链（主要是以太坊）上的开放金融系统。
-   **乐高积木 (Money Legos)**: 协议之间可以无许可地组合。
-   **非托管**: 用户掌握私钥，资产由智能合约管理。

## 2. 去中心化交易所 (DEX)
### 2.1 自动做市商 (AMM)
取代传统订单簿 (Order Book)，通过算法定价。
-   **恒定乘积公式 (Uniswap v2)**:
    $$
    x \times y = k
    $$
    其中 $x, y$ 是资金池中两种代币的数量。
-   **交易滑点**: 交易量相对于池子深度越大，滑点越高。
-   **无常损失 (Impermanent Loss)**: 相对于持有代币不动，流动性提供者 (LP) 在价格剧烈波动时可能遭受的损失。

### 2.2 集中流动性 (Uniswap v3)
LP 可以将资金集中在特定价格区间，提高资本效率。

## 3. 借贷协议 (Lending)
### 3.1 模式
-   **超额抵押**: 借款人需抵押价值高于借款额的资产（如抵押 150 ETH 借 100 USDC）。
-   **资金池模式**: 存款人将资金存入池子赚取利息，借款人从池子借款支付利息。利率由供需算法动态调整。
-   **清算**: 当抵押率跌破阈值，清算人替借款人还款并获得抵押品折扣奖励。

### 3.2 代表协议
-   **Aave**: 支持闪电贷 (Flash Loan)。
-   **Compound**: 首创流动性挖矿。

## 4. 稳定币 (Stablecoins)
### 4.1 法币抵押型 (Fiat-Backed)
-   **USDT, USDC**: 中心化机构发行，银行存有 1:1 美元储备。
-   **风险**: 中心化审查，储备金透明度。

### 4.2 加密资产抵押型 (Crypto-Backed)
-   **DAI (MakerDAO)**: 用户抵押 ETH 等资产生成 DAI。
-   **机制**: 超额抵押 + 稳定费率 + 清算机制。

### 4.3 算法稳定币 (Algorithmic)
-   无抵押或部分抵押，通过算法调整供应量维持价格。
-   **风险**: 死亡螺旋 (Death Spiral)，如 Terra/Luna 崩盘。

## 5. 闪电贷 (Flash Loans)
-   **定义**: 在同一笔交易中完成借款和还款。无需抵押。
-   **原理**: 交易具有原子性。如果最后无法还款，整笔交易回滚，仿佛从未发生。
-   **用途**: 套利、清算、资产迁移。
